<div class="wrapper" *ngIf="dm.dataIsResolved">

    <div class="table-section">

        <div class="header">
            {{ dm.lang['drivers_summary_block'] }}

            <button (click)="onClickTableToggleButton()">
                {{ ((dm.state.get('d_summary_table_collapsed_expanded') == 'collapsed') ? dm.lang['expand'] : dm.lang['collapse']) }}
            </button>
        </div>
        <div class="content" *ngIf="dm.state.get('d_summary_table_collapsed_expanded') == 'expanded'">

            <table-widget
                *ngIf="tableData"
                [data]="tableData"
                (row-select)="onRowSelect($event)"
            ></table-widget>

        </div>
    </div>

    <div class="decomp-section">
        <div class="header">
            {{ dm.lang['decomposition_block'] }}
            {{ ((decompData) ? (decompData['start'] +'-'+ decompData['end']) : null) }}

            <buttons-group
                *ngIf="dTypesSwitcherData"
                [data]="dTypesSwitcherData"
                (changed)="onChangedDecompType($event)"
            ></buttons-group>

        </div>

        <div class="content" *ngIf="dTypeData">

            <div>
                {{ dm.lang['driver_contribution'] }}
            </div>

            <waterfall-chart
                *ngIf="dTypeData['abs']"
                [data]="dTypeData['abs']"
            ></waterfall-chart>


            <div>
                {{ dm.lang['driver_change_cagr'] }}
            </div>
            <div>
                <table border="1">
                    <tr>
                        <td *ngFor="let rate of dTypeData['table']">
                            {{ rate['value'] }}
                            {{ rate['metric'] }}
                        </td>
                    </tr>
                </table>
            </div>

        </div>

    </div>

</div>
